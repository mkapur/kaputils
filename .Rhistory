scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), title = r)
levels(df0$model)
levels(df0$model) <- c('South','North','Central','Label')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), title = r)
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), title = r, color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Spectral')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), title = r, color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), title = r, color = '')
ggsave(plot = last_plot(), file = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png")
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.key.size = 11)+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
?legend.key.size
??legend.key.size
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 15) )+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22) )+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
# scale_x_continuous(limits = c(1900, 2019), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2025), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2021) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2020) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
SSplotYield(basemod1)
SSplotYield(basemod1,subplot = 1)
View(SSplotYield())
View(SSplotYield)
grep('equil',sumlist)
grep('Yield',sumlist)
sumlist[11]
sumlist[12]
str(sumlist)
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/crNorth") %>%
SSplotYield(out.S, col=mod.cols[3], subplot=1)
#   SSplotComparisons(., print = TRUE, shadeForecast = TRUE, legendlabels = c('Central','North','South'),
#                     plotdir = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/plots")
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/crNorth") %>%
SSplotYield(out.S, col=mod.cols[3], subplot=1)
#   SSplotComparisons(., print = TRUE, shadeForecast = TRUE, legendlabels = c('Central','North','South'),
#                     plotdir = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/plots")
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/North_forecast2030") %>%
SSplotYield(out.S, col=mod.cols[3], subplot=1)
#   SSplotComparisons(., print = TRUE, shadeForecast = TRUE, legendlabels = c('Central','North','South'),
#                     plotdir = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/plots")
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/North_forecast2030") %>%
SSplotYield(., col=mod.cols[3], subplot=1)
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label') %>%
filter(Yr < 2020) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
brewer.pal(3,Dark2)
brewer.pal(3,"Dark2")
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/North_forecast2030") %>%
SSplotYield(., col= "#1B9E77", subplot=1)
grid()
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/South_forecast2030") %>%
SSplotYield(out.C, col= "#D95F02", subplot=1, add=TRUE)
df0<- with(sumlist, cbind(melt(sumlist$SPRratio,id='Yr',value.name = 'SPRratio'),
melt(sumlist$SPRratioLower,id='Yr',value.name = 'SPRratioLower'),
melt(sumlist$SPRratioUpper,id='Yr',value.name = 'SPRratioUpper')))
df0$SPRratio <- as.numeric(as.character(df0$SPRratio))
df0$SPRratioLower <- as.numeric(as.character(df0$SPRratioLower))
df0$SPRratioUpper <- as.numeric(as.character(df0$SPRratioUpper))
levels(df0$model)
sumlist$SPRratio %>% spread(Yr,Label)
df0<- with(sumlist, cbind(melt(sumlist$SPRratio,id='Yr',value.name = 'SPRratio'),
melt(sumlist$SPRratioLower,id='Yr',value.name = 'SPRratioLower'),
melt(sumlist$SPRratioUpper,id='Yr',value.name = 'SPRratioUpper')))
df0$SPRratio <- as.numeric(as.character(df0$SPRratio))
df0$SPRratioLower <- as.numeric(as.character(df0$SPRratioLower))
df0$SPRratioUpper <- as.numeric(as.character(df0$SPRratioUpper))
levels(df0$model)
df0$model
# }
sumlist<-list.dirs("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods", recursive = F) %>%
lapply(.,SS_output) %>%
SSsummarize(.)
sumlist$SPRratio %>% spread(Yr,Label)
df0<- with(sumlist, cbind(melt(sumlist$SPRratio,id='Yr',value.name = 'SPRratio'),
melt(sumlist$SPRratioLower,id='Yr',value.name = 'SPRratioLower'),
melt(sumlist$SPRratioUpper,id='Yr',value.name = 'SPRratioUpper')))
df0$SPRratio <- as.numeric(as.character(df0$SPRratio))
df0$SPRratioLower <- as.numeric(as.character(df0$SPRratioLower))
df0$SPRratioUpper <- as.numeric(as.character(df0$SPRratioUpper))
levels(df0$model)
head(df0)
df0<- with(sumlist, cbind(melt(sumlist$SPRratio,id='Yr',value.name = 'SPRratio'),
melt(sumlist$SPRratioLower,id='Yr',value.name = 'SPRratioLower'),
melt(sumlist$SPRratioUpper,id='Yr',value.name = 'SPRratioUpper')))
df0$SPRratio <- as.numeric(as.character(df0$SPRratio))
df0$SPRratioLower <- as.numeric(as.character(df0$SPRratioLower))
df0$SPRratioUpper <- as.numeric(as.character(df0$SPRratioUpper))
df0 <- df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label')
df0<- with(sumlist, cbind(melt(sumlist$SPRratio,id='Yr',value.name = 'SPRratio'),
melt(sumlist$SPRratioLower,id='Yr',value.name = 'SPRratioLower'),
melt(sumlist$SPRratioUpper,id='Yr',value.name = 'SPRratioUpper')))
df0$SPRratio <- as.numeric(as.character(df0$SPRratio))
df0$SPRratioLower <- as.numeric(as.character(df0$SPRratioLower))
df0$SPRratioUpper <- as.numeric(as.character(df0$SPRratioUpper))
names(df0)[c(2,4,5,7,8)] <- c('model','yx','vx','yy','vy')
df0 <- df0 %>%  select(-vx,-vy, -yx,-yy) %>%
filter(model != 'Label')
levels(df0$model)
list.dirs("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods", recursive = F)
levels(df0$model) <- c('Central','North','South','Label')
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
df0 %>%
filter(Yr < 2020) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
ggsave(plot = last_plot(), file = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png")
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
png("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png")
df0 %>%
filter(Yr < 2020) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
dev.off()# ggsave(plot = last_plot(), file = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png")
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
png("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png", width = 6, height = 4, res = 520)
# data.frame("SPR" = 1- basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Value"],
#            "sd" =  basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"StdDev"],
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
png("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png", width = 6, height = 4, units = 'in', res = 520)
df0 %>%
filter(Yr < 2020) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
dev.off()# ggsave(plot = last_plot(), file = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png")
#   SSplotComparisons(., print = TRUE, shadeForecast = TRUE, legendlabels = c('Central','North','South'),
#                     plotdir = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/plots")
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/North_forecast2030") %>%
SSplotYield(., col= "#1B9E77", subplot=1)
png("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png", width = 6, height = 4, units = 'in', res = 520)
df0 %>%
filter(Yr < 2020) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
dev.off()
graphics.off()
#            "Yr" = as.numeric(as.character(substr(basemod10$derived_quants[grep("SPRratio_", basemod10$derived_quants$Label),"Label"],10,14)))) %>%
png("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png",
width = 8, height = 6, units = 'in', res = 520)
df0 %>%
filter(Yr < 2020) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.1,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
dev.off()# ggsave(plot = last_plot(), file = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png")
#   SSplotCompar
png("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png",
width = 8, height = 6, units = 'in', res = 520)
df0 %>%
filter(Yr < 2020) %>%
# mutate(lwr = SPR-1.96*sd, upper = SPR+1.96*sd ) %>%
ggplot(., aes(x= Yr, y = SPRratio, color = model)) +
theme_classic()+
theme(legend.position = c(0.2,0.9),
legend.text = element_text(size = 22),
axis.text = element_text(size = 20),
axis.title = element_text(size = 20))+
geom_point() +
geom_hline(yintercept =1, col = 'red')+
scale_color_brewer(palette = 'Dark2')+
scale_x_continuous(limits = c(1900, 2021), breaks = seq(1900,2020,20)) +
scale_y_continuous(limits = c(0,2)) +
geom_errorbar(aes(ymin = SPRratioLower, ymax = SPRratioUpper, col = model ), width = 0) +
labs(x = 'Year', y = paste(basemod10$SPRratioLabel), color = '')
dev.off()# ggsave(plot = last_plot(), file = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/sprratio_all.png")
#   SSplotCom
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/North_forecast2030") %>%
SSplotYield(., col= "#1B9E77", subplot=1)
grid()
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/South_forecast2030") %>%
SSplotYield(., col= "#D95F02", subplot=1, add=TRUE)
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/South_forecast2030") %>%
SSplotYield(., col= "#D95F02", subplot=1)
grid()
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/North_forecast2030") %>%
SSplotYield(., col= "#1B9E77", subplot=1,add = TRUE)
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/Central_forecast2030") %>%
SSplotYield(., col= "#7570B3", subplot=1, add=TRUE)
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/South_forecast2030") %>%
SSplotYield(., col= "#7570B3", subplot=1)
grid()
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/North_forecast2030") %>%
SSplotYield(., col= "#D95F02", subplot=1,add = TRUE)
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/Central_forecast2030") %>%
SSplotYield(., col= "#1B9E77", subplot=1, add=TRUE)
#   SSplotComparisons(., print = TRUE, shadeForecast = TRUE, legendlabels = c('Central','North','South'),
#                     plotdir = "C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/plots")
mod.cols = c("#7570B3" ,"#D95F02","#1B9E77")
legend('topright', legend=c('South','North','Central'), col=mod.cols, lwd=3, bg='white', bty='n')
legend('topright', legend=c('South','North','Central'), col=mod.cols, lwd=3, bg='white', bty='n', cex = 15)
legend('topright', legend=c('South','North','Central'), col=mod.cols, lwd=3, bg='white', bty='n', cex = 8)
legend('topright', legend=c('South','North','Central'), col=mod.cols, lwd=3, bg='white', bty='n', cex = 3)
png("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/yield_curve.png",
width = 8, height = 6, units = 'in', res = 520)
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/South_forecast2030") %>%
SSplotYield(., col= mod.cols[1], subplot=1)
grid()
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/North_forecast2030") %>%
SSplotYield(., col= mod.cols[2], subplot=1,add = TRUE)
SS_output("C:/Users/Maia Kapur/Dropbox/UW/assessments/china_2019_update/chinarock-update-2019/sprfiles/mods/Central_forecast2030") %>%
SSplotYield(., col= mod.cols[3], subplot=1, add=TRUE)
legend('topright', legend=c('South','North','Central'), col=mod.cols, lwd=3, bg='white', bty='n', cex = 3)
dev.off()
SSplotTimeseries(basemod10, subplot = 9,  print = F, plotdir = rootdir.temp, forecastplot = T)
SSplotComparisons(sumlist, print = F, subplots = 11, forecastplot = T)
SSplotComparisons(sumlist, print = F, subplots = 11, forecast = T)
SSplotComparisons(sumlist, print = F, subplots = 11)
SSplotComparisons(sumlist, print = F, subplots = 16)
SSplotSummaryF(basemod1)
basemod10$derived_quants[grep("Fstd_SPRtgt", basemod10$derived_quants$Label),"Value"]
