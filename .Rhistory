RootFile = "C:/users/mkapur/dropbox/TUNABOOT/"
llabls <- list.dirs(RootFile) %>% .[grepl('TUNA_', .)]
require(dplyr)
llabls <- list.dirs(RootFile) %>% .[grepl('TUNA_', .)]
setwd(rootdir)
dir.create("plots") ## make storage for plots
## make summary object
if(!is.na(pattern)){
mods = list.dirs(rootdir) %>%
.[grepl(pattern, .)]
}else{ mods = list.files(rootdir,  pattern = "EM|OM")}
pattern = "Rep"
## make summary object
if(!is.na(pattern)){
mods = list.dirs(rootdir) %>%
.[grepl(pattern, .)]
}else{ mods = list.files(rootdir,  pattern = "EM|OM")}
rootdir
rootdir <- RootFile
rootdir
## make summary object
if(!is.na(pattern)){
mods = list.dirs(rootdir) %>%
.[grepl(pattern, .)]
}else{ mods = list.files(rootdir,  pattern = "EM|OM")}
mods
## skip if it's just directory with folders inside
for(m in 1:length(mods)){
if(length(list.dirs(mods[m], recursive = F)) > 0)  moddrop[m] <- m
}
## skip if it's just directory with folders inside
moddrop <- NULL
for(m in 1:length(mods)){
if(length(list.dirs(mods[m], recursive = F)) > 0)  moddrop[m] <- m
}
MODDROP
moddrop
!is.na(moddrop)
moddrop[!is.na(moddrop)]
mods[-moddrop]
moddrop <- moddrop[!is.na(moddrop)]
ddrop)]
mods <-
mods[-moddrop]
## skip if it's just directory with folders inside
moddrop <- NULL
for(m in 1:length(mods)){
if(length(list.dirs(mods[m], recursive = F)) > 0)  moddrop[m] <- m
}
moddrop <- moddrop[!is.na(moddrop)]
mods <- mods[-moddrop]
summaryoutput = mods %>%
SSgetoutput(dirvec = .,
getcovar = F,
ncols = 1000) %>%
SSsummarize()
require(r4ss)
summaryoutput = mods %>%
SSgetoutput(dirvec = .,
getcovar = F,
ncols = 1000) %>%
SSsummarize()
subplots = c(1:9,20)
plotloc = paste0(RootFile,"/plots/"),
dolegend = F
llabels = llabls
plotloc = paste0(RootFile,"/plots/")
## dump plots to file
SSplotComparisons(
summaryoutput,
subplots = subplots,
plot = T,
pdf = F,
png = F,
print = T,
plotdir = plotloc,
indexfleets = length(unique(summaryoutput$indices$FleetName)),
lty = c(rep(1, summaryoutput$n-1),3),
legend = dolegend,
legendloc = 'bottomright',
legendlabels = llabels
)
SSplotComparisons(summaryoutput)
SSplotComparisons(summaryoutput, subplot = 1)
SSplotComparisons(summaryoutput, subplot = 2)
SSplotComparisons(summaryoutput, subplot = 3)
head(summaryoutput)
str(summaryoutput)
mods[11]
rootdir
setwd(rootdir)
dir.create("plots") ## make storage for plots
## make summary object
if(!is.na(pattern)){
mods = list.dirs(rootdir) %>%
.[grepl(pattern, .)]
}else{ mods = list.files(rootdir,  pattern = "EM|OM")}
mods
setwd(rootdir)
dir.create("plots") ## make storage for plots
## make summary object
if(!is.na(pattern)){
mods = list.dirs(rootdir) %>%
.[grepl(pattern, .)]
}else{ mods = list.files(rootdir,  pattern = "EM|OM")}
mods
## skip if it's just directory with folders inside
moddrop <- NULL
for(m in 1:length(mods)){
if(length(list.dirs(mods[m], recursive = F)) > 0)  moddrop[m] <- m
}
moddrop <- moddrop[!is.na(moddrop)]
mods <- mods[-moddrop]
mods
summaryoutput <- mods %>%
SSgetoutput(dirvec = .,
getcovar = F,
ncols = 1000) %>%
SSsummarize()
setwd(rootdir)
dir.create("plots") ## make storage for plots
## make summary object
if(!is.na(pattern)){
mods = list.dirs(rootdir) %>%
.[grepl(pattern, .)]
}else{ mods = list.files(rootdir,  pattern = "EM|OM")}
## skip if it's just directory with folders inside
moddrop <- NULL
for(m in 1:length(mods)){
if(length(list.dirs(mods[m], recursive = F)) > 0)  moddrop[m] <- m
}
moddrop <- moddrop[!is.na(moddrop)]
mods <- mods[-moddrop]
mods
summaryoutput <- mods %>%
SSgetoutput(dirvec = .,
getcovar = F,
ncols = 1000) %>%
SSsummarize()
## dump plots to file
SSplotComparisons(
summaryoutput,
subplots = subplots,
plot = T,
pdf = F,
png = F,
print = T,
plotdir = plotloc,
indexfleets = length(unique(summaryoutput$indices$FleetName)),
lty = c(rep(1, summaryoutput$n-1),3),
legend = dolegend,
legendloc = 'bottomright',
legendlabels = llabels
)
devtools::load_all("~/GitHub/kaputils")
